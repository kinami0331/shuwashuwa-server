# 后端小组的Todo

## 紧急

- 给定维修单编号和ServiceFormPO，来个更新的接口

- 把活动id和时间段选取移动到维修单属性

- 怎么更新维修事件状态

- 怎么设置维修单的审核管理员，以及维修事件的接单志愿者

- ServiceFormRejectionDTO(~~ServiceFormUpdateDTO~~)里只有一个formId和一个string，建议删掉这个DTO，直球变成dao更新方法的两个参数（事实上，管理员并不需要发送维修单的id，而是直接操作维修事件。所以这个DTO我需要重新设计，数据库不用的话先删掉）

- ServiceCompleteDTO(~~ServiceEventUpdateByVolunteerDTO~~)同上，没必要DTO

- 设计签到接口逻辑

## 次要

- ServicePic已经不必返回id，有个url就行

- 若把活动编号移动到维修单，ServiceEvent的创建就只用userid，不如改参数

- 想要根据活动编号获得userid和status，现在只能取出一个十分详细的DTO，有点蠢

- 增加一个重建数据库的接口以供测试
  
- 考虑一下是不是可以把维修单的创建时间和修改时间返回给前端

- 缩略图实现

- 用户通知



## 归档
- 删除单个用户的接口（传code，其实跟登陆时一样）
    - 已完成，根据传入的code字符串获取openid，利用openid在数据库中删除表项，在接口中添加了一个根据openID删除用户的方法。（俺Spring学艺不精，不知道有没有其他简单的办法）
    - 此外，由于Mybatis的DELETE注解会返回删除行数（在输入符合键值格式要求时），因此删除0行应该意味着待删除的用户不存在，因此（虽然不知道必不必要但是）做了一个简单的判断
    - 这是个DELETE请求，参数目前只需要传code（不知道有没有什么传输类的规范，不过想改也好改），要在body中传
    - 目前不清楚这个方法需要返回什么（似乎不需要Token那种的有意义信息），因此暂时返回了提示字符串
    
- 删除全部用户的接口
    - 已完成，与上面的方法类似，但并未进行是否删除的判断（感觉这里并没有必要了？反正有没有都是清空）
    - 这是个DELETE请求，参数目前只需要传code（不知道有没有什么传输类的规范，不过想改也好改），要在body中传
    - 目前不清楚这个方法需要返回什么（似乎不需要Token那种的有意义信息），因此暂时返回了提示字符串

- 用户信息更新接口，在初次填报或修改信息时都会用到，写Controller，然后在service层打印出传来的信息（不用调用DAO实现）
    - 已按这个设想完成，目前使用的是PUT请求，需要传code和一个UpdateUserInfoDto
    
- 前端获取用户信息的接口，返回一个JSON
    - 话说这里还是用UpdateUserInfoDto类吧？
    - 这是一个GET请求，参数是code
    
- 为了书写方便，把kinami之前在登陆中写的与微信交互的代码挪到了WecahtUtil类中，设置成Component，自动注入

- 关于这几个方法下一步应该需要做的（我目前想到的）
    - 用户信息的两个服务待完善Dao层的实现
    - 删除用户的服务待进一步测试（目前只做了本地测试
    - 每个服务的参数可能还需要进一步调整，可能需要增加传输类
